
<!doctype html>  
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title >Post A Ride</title>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
      <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,900" rel="stylesheet">
      <link rel="stylesheet" href="css/Footer-with-logo.css">
      <link rel="stylesheet" href="css/common.css">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/modal_success.css">
      <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
      
   </head>
   <body>
        <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
                <a class="navbar-brand" href="adminHome.html">Car Pooling System</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
              
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav mr-auto">
                    <li class="nav-item ">
                      <a class="nav-link" href="adminHome.html">Home </a>
                    </li>
                    <li class="nav-item active">
                      <a class="nav-link" href="postRide.html">Post A Ride <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                            <a class="nav-link " href="adminPreviousRides.html">Ride History</a>
                      
                    </li>
                    <!-- <li class="nav-item">
                      <a class="nav-link " href="aboutUS.html">About Us</a>
                    </li> -->
                    <li class="nav-item">
                      <a class="nav-link " href="dashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="ChatApp/login.php">Chat</a>
                      </li>
                  </ul>
                  <a href="index.html"><span class="navbar-text">Signout</span> </a>
                </div>
              </nav>
              <div id="booking" class="section">
                    <div class="section-center">
                        <div class="container">
                            <div class="row">   
                                <div class="col-md-5">
                                    <div class="booking-cta">
                                        <h1>POST A RIDE</h1>
                                        <p></p>
                                    </div>
                                </div>
                                <div  id = "formData" class="col-md-7 col-md-offset-1">
                                    <div class="booking-form">
                                        <form class="needs-validation"  novalidate>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <input class="form-control" id = "from" type="text" pattern="[a-zA-Z]*( [a-zA-Z]*)?" required>
                                                        <span class="form-label">From</span>
                                                        <span style="color: red;" id="fromWarning"></span>
                                                        <div id="valid-feedback_from">
                                                            Looks good!
                                                           </div>
                                                           <div id="invalid-feedback_from">
                                                             Please provide valid source
                                                           </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <input class="form-control" id="to" type="text" pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" required>
                                                        <span class="form-label">To</span>
                                                        <div class="valid-feedback">
                                                            Looks good!
                                                           </div>
                                                           <div class="invalid-feedback">
                                                             Please provide valid destination
                                                           </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Select Car Type</span>
                                                        <select id = "carType" class="form-control">
                                                            <option>Basic Car</option>
                                                            <option>Luxury Car</option>
                                                            <option>Premium Car</option>
                                                        </select>
                                                        <span class="select-arrow"></span>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Available Seats</span>
                                                        <select id = "seats" class="form-control">
                                                            <option>1</option>
                                                            <option>2</option>
                                                            <option>3</option>
                                                            <option>4</option>
                                                            <option>5</option>
                                                            <option>6</option>
                                                        </select>
                                                        <span class="select-arrow"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <input class="form-control" id="departureTime" type="time" required>
                                                        <span class="form-label">Departure Time</span>
                                                        <div class="valid-feedback">
                                                            Looks good!
                                                           </div>
                                                           <div class="invalid-feedback">
                                                             Please provide departure time
                                                           </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <input class="form-control" id="arrivalTime" type="time" required>
                                                        <span class="form-label">Arrival Time </span>
                                                        <div class="valid-feedback">
                                                            Looks good!
                                                           </div>
                                                           <div class="invalid-feedback">
                                                             Please provide arrival time
                                                           </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input class="form-control" id="fare" type="price" pattern="^\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(.[0-9][0-9])?$" required>
                                                            <span class="form-label">Fare(0.00)</span>
                                                            <div class="valid-feedback">
                                                                Looks good!
                                                               </div>
                                                               <div class="invalid-feedback">
                                                                 Please provide valid price!
                                                               </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input class="form-control" id="journeyDate" type="date" required>
                                                            <span class="form-label">Journey Date</span>
                                                            <div class="valid-feedback">
                                                                Looks good!
                                                               </div>
                                                               <div class="invalid-feedback">
                                                                 Please provide departure time
                                                               </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <h5 class="payment">Driver Details</h5>
                                                    <hr>
                                                </div>
            
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <input class="form-control" id="driverName" type="text" pattern="[a-zA-Z]*( [a-zA-Z]*)?" required>
                                                        <span class="form-label">Driver Name</span>
                                                        <div class="valid-feedback">
                                                            Looks good!
                                                           </div>
                                                           <div class="invalid-feedback">
                                                             Please provide valid driver Name
                                                           </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <input class="form-control" id="contactNumber" type="text" pattern="[a-zA-Z]*( [a-zA-Z]*)?" required>
                                                        <span class="form-label">Driver Email</span>
                                                        <div class="valid-feedback">
                                                            Looks good!
                                                           </div>
                                                           <div class="invalid-feedback">
                                                             Please provide valid Email
                                                           </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-btn">
                                                <button class="btn btn-info" id="bookButton" type="submit">Post Ride</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>

<div  id = "successData" class="col-md-7 col-md-offset-1">
    <div class="card-body">
        <form>
            <div class="form-row">
                <div class="form-group">
                    <h4>Your have successfully created a Ride. Now you ride is available to users.</h4>
                </div>                                                
            </div>                                            
            <div class="form-row">
                <button type="button" id="postAgain" class="btn btn-info">Post Another Ride</button>
            </div>
        </form>
    </div>
</div>

                            </div>
                        </div>
                    </div>
                </div>
                
<!-- Footer starts here -->
                <footer id="myFooter">
                    <div class="container">
                       <div class="row">
                          <div class="col-sm-3">
                             <h5>Get started</h5>
                             <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">Sign up</a></li>
           
                             </ul>
                          </div>
                          <div class="col-sm-3">
                             <h5>About us</h5>
                          </div>
                          <div class="col-sm-3">
                             <h5>Support</h5>
                          </div>
                          <div class="col-sm-3 info">
                             <h5>Information</h5>
                             <p>Car Pooling System provides various rides to different locations in Kansas and Missouri State with numerous car range types.</p>
                          </div>
                       </div>
                    </div>
                    <div class="second-bar">
                       <div class="container">
                          <h2 class="logo"><a href="#"> Car Pooling System</a></h2>
                          <div class="social-icons">
                             <a href="#" class="twitter"><i class="fa fa-twitter"></i></a>
                             <a href="#" class="facebook"><i class="fa fa-facebook"></i></a>
                             <a href="#" class="google"><i class="fa fa-google-plus"></i></a>
                          </div>
                       </div>
                    </div>
                </footer>


<!-- Script starts here -->
<script>
    
    var userLoggedIn = window.sessionStorage.getItem('adminID');
    console.log(userLoggedIn);
    if(userLoggedIn === "" || !userLoggedIn) {
        window.location.href = "index.html";
    }


$('#valid-feedback_from').hide();
$('#invalid-feedback_from').hide();
$('#fromWarning').hide();

                            $('#successData').hide();
                            $('.form-control').each(function () {
                                floatedLabel($(this));
                            });
                    
                            $('.form-control').on('input', function () {
                                floatedLabel($(this));
                            });
                    
                            function floatedLabel(input) {
                                var $field = input.closest('.form-group');
                                if (input.val()) {
                                    $field.addClass('input-not-empty');
                                } else {
                                    $field.removeClass('input-not-empty');
                                }
                            }

                            $('#bookButton').click(function(){
                            var from = $('#from').val();
                            var to = $('#to').val();
                            var carType = $('#carType').val();
                            var seats = $('#seats').val();
                            var departureTime = $('#departureTime').val();
                            var arrivalTime = $('#arrivalTime').val();
                            var price = $('#fare').val();
                            var journeyDate = $('#journeyDate').val();
                            var driverName = $('#driverName').val();
                            var contactNumber = $('#contactNumber').val();
                            
                            if(contactNumber != "" ){
                            $.ajax({
                            type: "POST",
                            data:{email:contactNumber},
                            url: "checkUserByID.php",
                            success: function(response) {
                            if(response==0 || response == "Admin"){
                            alert("Invalid Driver Email. Please check correctly");
                            }
                            }
                            });
                            }

                            if(from != "" && to!= "" && carType!= "" && seats!= "" && departureTime!= "" && arrivalTime!= "" &&
                            price!="" && journeyDate!= "" && driverName!="" && contactNumber!=""){ 
                                $.ajax({
                                type:'POST',
                                data:{from:from,to:to,carType:carType,seats:seats,departureTime:departureTime,arrivalTime:arrivalTime,
                                price:price,journeyDate:journeyDate,driverName:driverName,contactNumber:contactNumber},
                                url:"postRide.php",
                                success:function(output){
                                    alert(output)
                                    if (output ==0) {
                                        alert("Invalid Credentials");
                                    } else {
                                    alert("Your ride has been posted sucessfully.");
                                    }
                                }
                                });
                            } else {
                                alert("Incorrect Data. Please fill all fields correctly")
                            }
                            });
                            
                            $('#postAgain').click(function(){
                                $('#successData').hide();
                                $('#formData').show();
                            });
</script>
                
              </body>
              </html>