
<!doctype html>  
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title >Book a Ride</title>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
      <link rel="stylesheet" href="css/Footer-with-logo.css">
      <link rel="stylesheet" href="css/common.css">
      <link rel="stylesheet" href="css/carBook.css">
      <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
   </head>
   <body>
      <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
          <a class="navbar-brand" href="userHome.html">Car Pooling System</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item ">
                <a class="nav-link" href="userHome.html">Home </a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="bookRide.html">Book Your Ride<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                      <a class="nav-link " href="previousRides.html">Ride History</a>
                
              </li>
              <li class="nav-item" id="postARide">
                <a class="nav-link" href="postRideUser.html">Post A Ride</a>
              </li>
              <li class="nav-item">
                <a class="nav-link " href="aboutUs.html">About Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link " href="contactUS.html">Contact Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link " href="ChatApp/login.php">Chat</a>
              </li>
            </ul>
            <input type="text" id="myInput" onChange="searchFunc()" placeholder="Search for rides..">
            <a href="index.html"><span class="navbar-text">Signout</span> </a>
          </div>
        </nav>
              <div class="container-fluid carcontainer">
                <div class="row">
                        <div class="card-deck" id="getRideDetails">
                          
                       
                        </div>  
                </div>
              </div>
              <footer id="myFooter">
                <div class="container">
                   <div class="row">
                      <div class="col-sm-3">
                         <h5>Get started</h5>
                         <ul>
                            <li><a href="#">Home</a></li>
                            <li><a href="#">Sign up</a></li>
       
                         </ul>
                      </div>
                      <div class="col-sm-3">
                         <h5>About us</h5>
                      </div>
                      <div class="col-sm-3">
                         <h5>Support</h5>
                      </div>
                      <div class="col-sm-3 info">
                         <h5>Information</h5>
                         <p>Car Pooling System provides various rides to different locations  with numerous car range types.</p>
                      </div>
                   </div>
                </div>
                <div class="second-bar">
                   <div class="container">
                      <h2 class="logo"><a href="#">Car Pooling System</a></h2>
                      <div class="social-icons">
                         <a href="#" class="twitter"><i class="fa fa-twitter"></i></a>
                         <a href="#" class="facebook"><i class="fa fa-facebook"></i></a>
                         <a href="#" class="google"><i class="fa fa-google-plus"></i></a>
                      </div>
                   </div>
                </div>
             </footer>
             
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script>
    var userLoggedIn = window.sessionStorage.getItem('userID');
    console.log(userLoggedIn);
    if(userLoggedIn === "" || !userLoggedIn) {
      window.location.href = "index.html";
    }
</script>
<script src="js/bookRide.js"></script>
<script>

$('#postARide').hide();           
    var isDriver = window.sessionStorage.getItem('isDriver');
    console.log(isDriver);
    if(isDriver === "true") {
      $('#postARide').show();
    }
    
function searchFunc() {
var rideDetails = JSON.parse(window.sessionStorage.getItem("RideDetails"));
  // Declare variables
  console.log("Inside Search Func");
  console.log("The Ride Details are",rideDetails);

  var searchList = '';
  var input, filter;
  input = document.getElementById('myInput');
  filter = input.value.toUpperCase();
  var image=[];

  console.log(filter);

  for (i = 0; i < rideDetails.length; i++) {
        if(rideDetails[i].carType === "Basic Car"){
          image.push("images/basic.jpg")
          }
          else if(rideDetails[i].carType === "Premium Car"){
            image.push("images/premium.jpg")
          }
          else if(rideDetails[i].carType === "Luxury Car"){
            image.push("images/luxury.jpg")
          }
          else{
            image.push("images/basic.jpg")
          }
   }

  // Loop through all list items, and hide those who don't match the search query
  for (i = 0; i < rideDetails.length; i++) {
   console.log(rideDetails[i].from.toUpperCase());
   if ((rideDetails[i].from.toUpperCase().search(filter) > -1) || (rideDetails[i].carType.toUpperCase().search(filter) > -1) || (rideDetails[i].journeyDate.search(filter) > -1)) {
      searchList +=  '<div class="card col-md-3" >'+ '<img class="card-img-top" src="'+image[i]+'"  alt="Card image cap">'+
        '<div class="card-body">'+
          '<h5 class="card-title">'+rideDetails[i].carType+'</h5>'+
          '<p class="card-text">'+'<b>From: </b>'+rideDetails[i].from+'</p>'+
          '<p class="card-text">'+'<b>To: </b>'+rideDetails[i].to+'</p>'+
          '<p class="card-text">'+'<b>Departure Time: </b>'+rideDetails[i].departureTime+'</p>'+
          '<p class="card-text">'+'<b>Arrival Time: </b>'+rideDetails[i].arrivalTime+'</p>'+
          '<p class="card-text">'+'<b>Journey Date: </b>'+rideDetails[i].journeyDate+'</p>'+
          '</div>'+
          '<a href = "confirmBooking.html?carId='+rideDetails[i].rideID+'" id = "bookACar" value="'+rideDetails[i].rideID+'" class="btn btn-info">'+"Book"+'</a>'+
        '</div>' + '</div>';  
      console.log("Inside IF condition",searchList)
    } else {
      searchList += "";
    }
  }

  $("#getRideDetails").html(searchList);

}
</script>
</body>
</html>